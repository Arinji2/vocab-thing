import{D as p,g,r as s,u as h,j as e,e as j,z as i}from"./main-m5Ef5gMO.js";i.object({state:i.string().catch(""),code:i.string().catch("")});const N=function(){const{mutate:r,isSuccess:c,error:o}=p(),l=g("/auth/$provider/callback/"),{provider:d,state:u,code:f,user:a}=l.useLoaderData(),[t,m]=s.useState(0),n=h();return s.useEffect(()=>{r({providerType:d,code:f,state:u,fingerprint:a.agent,ip:a.ip})},[]),s.useEffect(()=>{c&&n({to:"/dashboard"})},[c]),s.useEffect(()=>{const x=setTimeout(()=>{m(t+1)},1e3);return t>60&&setTimeout(()=>{n({to:"/login"})},2e3),()=>clearTimeout(x)},[t]),e.jsxs("div",{className:"w-full h-fit flex flex-col items-center gap-6 justify-center",children:[e.jsxs("div",{className:"text-brand-text w-full h-fit flex flex-col items-center justify-center gap-6",children:[e.jsxs("div",{className:"text-xl font-medium tracking-large w-full h-fit flex flex-row items-center justify-center gap-2",children:[e.jsx(j,{className:"animate-spin text-brand-accent",size:25,strokeWidth:3})," ","Authenticating Securely"]}),e.jsxs("p",{children:["Time Elapsed: ",t," seconds"]})]}),o&&e.jsx("div",{className:"text-red-500",children:"Authentication failed. Redirecting to login..."}),t>60&&e.jsx("div",{className:"flex flex-col items-center justify-center",children:e.jsx("p",{className:"text-xl text-brand-destructive-light",children:"Authentication timed out. Redirecting to login..."})})]})};export{N as component};
